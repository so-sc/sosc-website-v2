---
import { Image } from "astro:assets";
import { Calendar, User } from "@lucide/astro";

const {
	title,
	description,
	cover,
	date,
	link,
	highlight = false,
	author,
	tags,
} = Astro.props;

const formattedDate = new Date(date).toLocaleDateString("en-US", {
	year: "numeric",
	month: "long",
	day: "numeric",
});
---

<a
  href={`/blogs/${link}`}
  class="group block border-b border-gray-100 py-10 transition-colors last:border-b-0 hover:border-primary/20"
>
  <!-- Author Row -->
  <div class="mb-4 flex items-center gap-4">
    <img
      src={`https://github.com/${author}.png`}
      alt={author}
      class="h-12 w-12 rounded-full border border-gray-100 bg-gray-50"
      loading="lazy"
      decoding="async"
      onerror="this.onerror=null; this.src='/github_avatar.svg';"
    />
    <div class="flex flex-col">
      <span class="text-sm font-bold text-gray-900">{author}</span>
      <span class="text-[10px] italic text-gray-400">Contributor & Member</span>
    </div>
    <div class="ml-auto text-[10px] font-medium text-gray-400">
      <span>{formattedDate}</span>
      <span class="mx-2">in</span>
      <span class="underline decoration-primary/30 underline-offset-2 transition-colors hover:text-primary">
        {tags}
      </span>
    </div>
  </div>

  <!-- Title -->
  <h3 class="mb-6 text-2xl font-black leading-tight text-gray-900 transition-colors group-hover:text-primary md:text-3xl">
    {title}
  </h3>

  <!-- Content Row -->
  <div class="flex flex-col gap-6 md:flex-row">
    {cover && (
      <div class="h-32 w-full flex-shrink-0 overflow-hidden bg-gray-50 md:h-40 md:w-64">
        <Image
          src={cover}
          alt={title}
          class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
          width={400}
          height={250}
          format="webp"
        />
      </div>
    )}
    
    <div class="flex flex-col justify-between">
      <p class="line-clamp-4 text-sm leading-relaxed text-gray-500">
        {description}
      </p>
      
      <div class="mt-4 flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest text-gray-900 transition-colors group-hover:text-primary">
        <span>View This Article</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 transition-transform duration-300 group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="square" stroke-linejoin="miter" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </div>
    </div>
  </div>
</a>