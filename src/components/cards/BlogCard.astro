---
import { Image } from "astro:assets";

const {
  title,
  description,
  cover,
  date,
  link,
  highlight = false,
  author,
} = Astro.props;

const formattedDate = new Date(date).toLocaleDateString("en-US", {
  year: "numeric",
  month: "short",
  day: "numeric",
});

// Calculate estimated read time (assuming 200 words per minute)
const wordCount = description?.split(' ').length || 100;
const readTime = Math.max(1, Math.ceil(wordCount / 200));
---

<a
  class={`group relative overflow-hidden rounded-lg cursor-pointer transition-transform duration-300 hover:scale-[1.02] ${highlight ? "lg:col-span-2 lg:row-span-2" : ""}`}
  href={`/blogs/${link}`}
>
  <!-- Image with overlay -->
  <div class={`relative ${highlight ? "h-[600px]" : "h-[400px]"}`}>
    <Image
      src={cover}
      alt={title}
      class="h-full w-full object-cover"
      width={1280}
      height={720}
      format="webp"
      loading="lazy"
      quality={80}
    />
    
    <!-- Dark gradient overlay at bottom for text visibility -->
    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"></div>
  </div>

  <!-- Text overlay content -->
  <div class={`absolute bottom-0 left-0 right-0 p-6 text-white ${highlight ? "p-8" : ""}`}>
    <!-- Date and read time -->
    <div class="flex items-center gap-2 text-sm mb-3">
      <span>{formattedDate}</span>
      <span>â€¢</span>
      <span>{readTime} min read</span>
    </div>

    <!-- Title -->
    <h3
      class={`font-bold leading-tight mb-2 transition-colors group-hover:text-primary ${highlight ? "text-4xl" : "text-2xl"}`}
    >
      {title}
    </h3>

    <!-- Description (only for highlighted cards) -->
    {
      highlight && (
        <p class="text-gray-200 text-base line-clamp-3 mb-2">
          {description}
        </p>
      )
    }
  </div>
</a>
